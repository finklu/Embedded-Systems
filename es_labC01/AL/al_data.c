#include <msp430.h>
#include "al_data.h"
#include "HAL/hal_adc12.h"

extern ADC12Com ADC12_Data;

const unsigned short ir_front[TABLE_SIZE] = {1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1492,1471,1450,1430,1410,1391,1372,1354,1336,1319,1302,1285,1269,1253,1237,1222,1207,1193,1179,1165,1151,1138,1125,1112,1100,1087,1075,1063,1052,1040,1029,1018,1007,996,986,976,966,956,946,936,927,917,908,899,890,881,873,864,856,847,839,831,823,815,807,800,792,785,777,770,763,756,749,742,735,728,721,715,708,702,696,689,683,677,671,665,659,654,648,642,637,631,626,620,615,610,605,600,595,590,585,580,575,570,566,561,557,552,548,543,539,535,531,527,522,518,515,511,507,503,499,495,492,488,485,481,478,474,471,468,464,461,458,455,452,449,446,443,440,437,434,431,428,426,423,420,417,415,412,410,407,405,402,400,397,395,393,390,388,386,383,381,379,377,375,372,370,368,366,364,362,360,358,356,354,352,350,348,346,344,343,341,339,337,335,333,332,330,328,326,324,323,321,319,318,316,314,312,311,309,307,306,304,302,301,299,298,296,294,293,291,290,288,286,285,283,282,280,279,277,276,274,273,271,270,268,267,265,264,262,261,259,258,257,255,254,252,251,250,248,247,245,244,243,241,240,239,237,236,235,233,232,231,230,228,227,226,225,223,222,221,220,218,217,216,215,214,212,211,210,209,208,207,206,205,203,202,201,200,199,198,197,196,195,194,193,192,191,190,189,188,187,186,185,184,183,182,181,180,179,178,177,176,175,174,173,172,171,170,169,168,167,167,166,165,164,163,162,161,160,159,158,157,156,155,155,154,153,152,151,150,149,148,147,146,145,144,143,142,141,140,140,139,138,137,136,135,134,133,132,131,130,129,128,127,126,125,124,123,122,121,120,119,118,118,117,116,115,114,113,112,111,110,109,108,107,106,105,104,104,103,102,101,100,99,98,97,97,96,95,94,93,92,92,91,90,89,88,87,87,86,85,84,83,82,82,81,80,79,78,77,76,75,74,73,72,71,70,69,68,67,66,64,63,61,60,58,57,55,53,51,49,47,44,42,39,37,34,31,27,24,20,16,12,8,3};
const unsigned short ir_right[TABLE_SIZE] = {800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,790,781,772,762,753,744,735,726,718,709,700,692,684,676,668,660,652,644,636,629,621,614,607,599,592,585,579,572,565,558,552,545,539,533,527,521,515,509,503,497,491,486,480,475,469,464,459,453,448,443,438,433,429,424,419,415,410,405,401,397,392,388,384,380,376,372,368,364,360,356,352,349,345,341,338,334,331,328,324,321,318,315,311,308,305,302,299,296,293,291,288,285,282,279,277,274,272,269,267,264,262,259,257,255,252,250,248,246,243,241,239,237,235,233,231,229,227,225,223,221,219,218,216,214,212,211,209,207,206,204,202,201,199,198,196,195,193,192,190,189,187,186,185,183,182,181,179,178,177,176,174,173,172,171,170,168,167,166,165,164,163,162,161,159,158,157,156,155,154,153,152,151,150,149,149,148,147,146,145,144,143,142,141,140,140,139,138,137,136,135,135,134,133,132,131,131,130,129,128,128,127,126,125,125,124,123,122,122,121,120,120,119,118,118,117,116,116,115,114,114,113,112,112,111,111,110,109,109,108,107,107,106,106,105,104,104,103,103,102,102,101,100,100,99,99,98,98,97,97,96,96,95,94,94,93,93,92,92,91,91,90,90,89,89,88,88,87,87,86,86,85,85,85,84,84,83,83,82,82,81,81,80,80,80,79,79,78,78,77,77,77,76,76,75,75,75,74,74,73,73,73,72,72,71,71,71,70,70,69,69,69,68,68,68,67,67,67,66,66,66,65,65,64,64,64,63,63,63,62,62,62,61,61,61,60,60,60,59,59,59,58,58,58,58,57,57,57,56,56,56,55,55,55,54,54,54,53,53,53,52,52,52,51,51,51,50,50,50,49,49,49,48,48,48,47,47,46,46,46,45,45,45,44,44,43,43,43,42,42,41,41,40,40,39,39,39,38,38,37,37,36,35,35,34,34,33,33,32,31,31,30,30,29,28,28,27,26,26,25,24,23,23,22,21,20,19,18,18,17,16,15,14,13,12,11,10,9,8,7,5,4,3,2,1};
const unsigned short ir_left[TABLE_SIZE] = {800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,800,795,788,781,775,768,761,755,748,742,735,729,722,716,710,704,698,691,685,679,673,668,662,656,650,645,639,633,628,622,617,611,606,601,595,590,585,580,575,570,565,560,555,550,545,540,536,531,526,522,517,512,508,503,499,495,490,486,482,477,473,469,465,461,457,453,449,445,441,437,433,430,426,422,418,415,411,408,404,401,397,394,390,387,383,380,377,374,370,367,364,361,358,355,352,349,346,343,340,337,334,331,328,325,323,320,317,315,312,309,307,304,302,299,297,294,292,289,287,284,282,280,277,275,273,271,268,266,264,262,260,258,256,254,252,250,248,246,244,242,240,238,236,234,232,231,229,227,225,223,222,220,218,217,215,213,212,210,209,207,206,204,202,201,199,198,197,195,194,192,191,190,188,187,185,184,183,182,180,179,178,177,175,174,173,172,171,169,168,167,166,165,164,163,162,160,159,158,157,156,155,154,153,152,151,150,149,148,147,147,146,145,144,143,142,141,140,139,139,138,137,136,135,134,134,133,132,131,130,130,129,128,127,127,126,125,124,124,123,122,122,121,120,119,119,118,117,117,116,115,115,114,113,113,112,112,111,110,110,109,108,108,107,107,106,105,105,104,104,103,102,102,101,101,100,100,99,99,98,97,97,96,96,95,95,94,94,93,92,92,91,91,90,90,89,89,88,88,87,87,86,86,85,85,84,83,83,82,82,81,81,80,80,79,79,78,78,77,77,76,76,75,75,74,74,73,73,72,72,71,71,70,70,69,68,68,67,67,66,66,65,65,64,64,63,63,62,62,61,61,60,60,59,59,58,58,57,56,56,55,55,54,54,53,53,52,52,51,51,50,49,49,48,48,47,47,46,46,45,45,44,43,43,42,42,41,41,40,40,39,38,38,37,37,36,36,35,35,34,33,33,32,32,31,31,30,29,29,28,28,27,27,26,26,25,24,24,23,23,22,22,21,20,20,19,19,18,18,17,16,16,15,15,14,14,13,13,12,11,11,10,10,9,9,8,8,7,7,6,5,5,4,4,3,3,2,2,1,1,0};

void AL_SensorDistances()
{
   ADC12_Data.SensorFront = ir_front[ADC12_Data.ADCBuffer[2] >> 3];
   ADC12_Data.SensorLeft = ir_left[ADC12_Data.ADCBuffer[1] >> 3];
   ADC12_Data.SensorRight = ir_right[ADC12_Data.ADCBuffer[0] >> 3];
}
